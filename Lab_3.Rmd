---
title: "Lab 2 - Univariate analysis"
output: 
    html_document:
        toc: TRUE
        toc_float: TRUE
        number_sections: yes
        theme: lumen
---

What you will learn:

- Use R to calculate simple statistical measures to describe a variable.


# Find the variables to use in this exercise 

In this exercise, each of you will analyze a different variable. In the **NameOgVariables.pdf** you will which of the two variables you are supposed to use and in which dataset you will find them. The document DataDescription.pdf contains a brief description (associated label / label). 

In this exercise I will use World2005.xlsx.

The data is, as in Exercise 1, taken from the World Bank. Data source is:
World Bank 2016. [World Bank development indicators](http://data.worldbank.org/indicator)

# Load your data in R

From BlackBoard, in the exercise folder dedicated to LM 3, you will find the files World2005.xlsx, World2006.xlsx, etc. Download one of these containing your variables and save it in a folder created for this exercise.

Load the dataset in R.

```{r, echo=FALSE, results=FALSE}
library(xlsx)
data <- read.xlsx('data/Lab_3/World2005.xlsx', sheetIndex = 1)
```

# Calculate descriptive statistical goals for Variable 1 and Variable 2.

Find your Variable 1 and Variable 2 in the XLSX file and answer the questions below for both variables:

1. What is the type of the variable? Use the function `str()`
2. For how countries devices do you have data for? *Tip: find the number of missing data for your variable by using the function `table()` for example*
3. What is the average? Use the function `mean()`
4. What is the median value? Use the function `median()`
5. What is the standard deviation? Use the function `sd()`
6. What is the variance? Use the function `var()`
7. What is the highest / lowest value in the data material?

*IMPORTANT NOTE: when using the summary functions such as `mean()`, `var()` etc. You may have to use the argument `na.rm = TRUE`. When there is missing data in the column R will return NA if you use the summary statistics. To avoid this write as follow (for instance for the mean function): *

```{r}
# If I do not account for the NAs
mean(data$LifeExp05)

# If I account for the NAs
mean(data$LifeExp05, na.rm = TRUE)
```

Fill the document Submission template_Exercise3.docx with your answers.

# Compare descriptive statistics for two continents

So far we have looked at the whole world in one. Now we will calculate descriptive statistics for two continents separately. Note the Region variable in the data file. Each country (entity in the dataset) is assigned a code for continental affiliation. The codes are as follows:

1 Europe
2 Middle East
3	Asia
4	Africa
5	America (north, central and south)
6	Oceania (Australia m.m.)

*What is the type of the `Region` variable? Do you think this is appropriate?*. Note that question can be repeated on the test associated with this exercise - final test for LM3.

We will now calculate descriptive statistics for all countries belonging to two continents. You can decide which ones. For example, if you want to compare countries in Europe with countries in Africa, select region 1 and region 4 and subset the countries from the continent you are interested in. You must also make sure that the descriptive statistics are calculated separately for the two continents.

Remember the subsetting section in the tutorial. For instance, if I want to do summary statistics on Europe and America I write:

```{r}
# I subset the dataset by taking the continents I am interested in
sub <- data[data$Region == 1 | data$Region == 5,]

# I check if the subset has been successful
unique(sub$Region)

# You can also create one dataset for Europe and one dataset for America:
Europe <- data[data$Region == 1,]
America <- data[data$Region == 5,]
```

Once you have done the subsetting, do the summary statistics separately for each continent. That is, you will calculate the mean, standard deviation, variance ... for each continent. 

# Make histograms

Make histograms for the two variables you were assigned and for each of the two continents. You should have 4 histograms in total.

The histograms generated by R are not on the same scale and are therefore unsuitable for comparison. To facilitate comparison we need to change for the variable. We will **standardize** the variables.

**To standardize** means to substract the mean and divide by its standard deviation. The formula is as follow:

$\frac{x - \overline{x}}{sd(x)}$

$x$ being a value of the variable
$\overline{x}$ being the mean of the variable
$sd(x)$ being the standard deviation of the variable

For instance, here I compare the variable LifeExp05 for both Europe and America.

```{r}
# First I standardized the values for Europe and America. For this I will create two vectors representing the standardized variables
Europe$LifeExp05_st <- (Europe$LifeExp05 - mean(Europe$LifeExp05, na.rm = TRUE)) /
  sd(Europe$LifeExp05, na.rm = TRUE)

America$LifeExp05_st <- (America$LifeExp05 - mean(America$LifeExp05, na.rm = TRUE)) / sd(America$LifeExp05, na.rm = TRUE)

# Then I draw histograms of the standardized variables:
hist(Europe$LifeExp05_st, main = 'Histogram of life expectancy in Europe in 2005', 
     xlab = 'Life expectency (specify the unit)', ylab = 'Frequency')

hist(America$LifeExp05_st, main = 'Histogram of life expectancy in America in 2005', 
     xlab = 'Life expectency (specify the unit)', ylab = 'Frequency')
```

I let you as an exercise to add colors to your histograms.

# Assess the results

Study the results that you get in the output window. Discuss with a fellow student the following questions (the questions may be repeated in the test associated with this exercise):

> * Which statistical analysis would be suitable to determine which continent overall scores “highest” with respect to the variable in question?
> * What statistical analysis would be appropriate to determine if the countries in one of the regions are more different or more similar than the countries of the other region?
> * How can you use frequency histograms to illustrate the two previous questions?

# Submission

- The results of step 3 - use the document Submission template_Exercise3.docx
- The histograms of your two variables for the continents you have selected - a pair of  histograms per page (expand the two-page submission template_exercise3.docx to accommodate your frequency histograms)
- Insert descriptive (but short) character texts.
- Explain your variables and provide source reference. Remember that the viewer of the charts should have all the necessary information to understand what they are showing.
- Make sure everything is neat and clear. Use only one language.
- Submit a maximum of one 3-page file - change the file name to <your name> _exercise3
- Save the file as a PDF and go for a walk.
